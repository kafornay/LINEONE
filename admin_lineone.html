<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üì¶ LINE ONE ‚Äî Painel de Produtos</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
  margin: 0;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #c32b2b;
}
form {
  background: #1e1e1e;
  padding: 20px;
  border-radius: 12px;
  max-width: 400px;
  margin: 20px auto;
  box-shadow: 0 0 10px #000;
}
label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}
input, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  border: none;
  border-radius: 6px;
  background: #2b2b2b;
  color: #fff;
}
button {
  margin-top: 15px;
  width: 100%;
  padding: 10px;
  background: #c32b2b;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
}
button:hover {
  background: #a62121;
}
img.preview {
  display: block;
  max-width: 100%;
  margin-top: 10px;
  border-radius: 6px;
}
#mensagem {
  text-align: center;
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>
<body>

<h1>üì¶ Painel de Produtos</h1>

<form id="formProduto">
  <label>Nome do Produto</label>
  <input type="text" id="nome" required>

  <label>Descri√ß√£o</label>
  <textarea id="descricao" rows="2" required></textarea>

  <label>Pre√ßo (R$)</label>
  <input type="number" id="preco" step="0.01" required>

  <label>Estoque</label>
  <input type="number" id="estoque" required>

  <label>Imagem do Produto</label>
  <input type="file" id="imagem" accept="image/*" required>
  <img id="preview" class="preview" style="display:none;">

  <button type="submit">üì§ Enviar Produto</button>
  <div id="mensagem"></div>
</form>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzXiS_pat0Gi1OTirwm5NZSrWUdiB4onXobDo1x0bBMudvnXBf13SQMxSyIJPlCL-IS6g/exec";

const form = document.getElementById("formProduto");
const imgInput = document.getElementById("imagem");
const preview = document.getElementById("preview");
const msg = document.getElementById("mensagem");

imgInput.addEventListener("change", () => {
  const file = imgInput.files[0];
  if (file) {
    preview.src = URL.createObjectURL(file);
    preview.style.display = "block";
  }
});

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  msg.innerText = "‚è≥ Enviando...";

  const formData = new FormData();
  formData.append("action", "add");
  formData.append("nome", document.getElementById("nome").value);
  formData.append("descricao", document.getElementById("descricao").value);
  formData.append("preco", document.getElementById("preco").value);
  formData.append("estoque", document.getElementById("estoque").value);
  formData.append("imagem", imgInput.files[0]);

  try {
    const resposta = await fetch(SCRIPT_URL, { method: "POST", body: formData });
    const dados = await resposta.json();

    if (dados.sucesso || dados.success) {
      msg.style.color = "lime";
      msg.innerText = "‚úÖ Produto adicionado com sucesso!";
      form.reset();
      preview.style.display = "none";
    } else {
      msg.style.color = "red";
      msg.innerText = "‚ùå Erro: " + (dados.message || dados.erro || "Falha desconhecida");
    }
  } catch (erro) {
    msg.style.color = "red";
    msg.innerText = "‚ùå Falha ao conectar: " + erro;
  }
});
</script>

</body>
</html>
